(()=>{"use strict";var t={365:(t,e,n)=>{n.d(e,{A:()=>i});var r=n(354),o=n.n(r),s=n(314),a=n.n(s)()(o());a.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap);"]),a.push([t.id,':root {\n  --bg: #e5e5e5;\n  --fg: #171717;\n  --ship-color: #c084fc;\n  --hit-color: #059669;\n  --miss-color: #ef4444;\n  --hover-color: #fbbf24;\n}\n\nbody {\n  background: var(--bg);\n  color: var(--fg);\n  font-family: "Rubik";\n  padding: 1rem;\n}\n\nh1 {\n  letter-spacing: 1.5px;\n  text-align: center;\n}\n\nmain {\n  display: flex;\n  justify-content: center;\n  gap: 3rem;\n  padding-top: 3rem;\n}\n\ndiv[class="board"] {\n  border: 1px dashed var(--fg);\n  cursor: pointer;\n\n  > div {\n    display: flex;\n  }\n\n  div[data-x] {\n    width: 3rem;\n    aspect-ratio: 1;\n    border: 1px dashed var(--fg);\n\n    &:hover {\n      background: var(--hover-color);\n    }\n  }\n}\n\n.ship {\n  background: var(--ship-color);\n}\n\n.miss {\n  position: relative;\n\n  &::before,\n  &::after {\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 50%;\n    height: 4px;\n    background-color: var(--miss-color);\n  }\n\n  &::before {\n    transform: translate(-50%, -50%) rotate(45deg);\n  }\n\n  &::after {\n    transform: translate(-50%, -50%) rotate(-45deg);\n  }\n}\n\n.hit {\n  position: relative;\n\n  &::before {\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 30%;\n    height: 30%;\n    background-color: var(--hit-color);\n    border-radius: 50%;\n    transform: translate(-50%, -50%);\n  }\n}\n',"",{version:3,sources:["webpack://./src/styles.css"],names:[],mappings:"AAEA;EACE,aAAa;EACb,aAAa;EACb,qBAAqB;EACrB,oBAAoB;EACpB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA;EACE,qBAAqB;EACrB,gBAAgB;EAChB,oBAAoB;EACpB,aAAa;AACf;;AAEA;EACE,qBAAqB;EACrB,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,uBAAuB;EACvB,SAAS;EACT,iBAAiB;AACnB;;AAEA;EACE,4BAA4B;EAC5B,eAAe;;EAEf;IACE,aAAa;EACf;;EAEA;IACE,WAAW;IACX,eAAe;IACf,4BAA4B;;IAE5B;MACE,8BAA8B;IAChC;EACF;AACF;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,kBAAkB;;EAElB;;IAEE,WAAW;IACX,kBAAkB;IAClB,QAAQ;IACR,SAAS;IACT,UAAU;IACV,WAAW;IACX,mCAAmC;EACrC;;EAEA;IACE,8CAA8C;EAChD;;EAEA;IACE,+CAA+C;EACjD;AACF;;AAEA;EACE,kBAAkB;;EAElB;IACE,WAAW;IACX,kBAAkB;IAClB,QAAQ;IACR,SAAS;IACT,UAAU;IACV,WAAW;IACX,kCAAkC;IAClC,kBAAkB;IAClB,gCAAgC;EAClC;AACF",sourcesContent:['@import url("https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap");\n\n:root {\n  --bg: #e5e5e5;\n  --fg: #171717;\n  --ship-color: #c084fc;\n  --hit-color: #059669;\n  --miss-color: #ef4444;\n  --hover-color: #fbbf24;\n}\n\nbody {\n  background: var(--bg);\n  color: var(--fg);\n  font-family: "Rubik";\n  padding: 1rem;\n}\n\nh1 {\n  letter-spacing: 1.5px;\n  text-align: center;\n}\n\nmain {\n  display: flex;\n  justify-content: center;\n  gap: 3rem;\n  padding-top: 3rem;\n}\n\ndiv[class="board"] {\n  border: 1px dashed var(--fg);\n  cursor: pointer;\n\n  > div {\n    display: flex;\n  }\n\n  div[data-x] {\n    width: 3rem;\n    aspect-ratio: 1;\n    border: 1px dashed var(--fg);\n\n    &:hover {\n      background: var(--hover-color);\n    }\n  }\n}\n\n.ship {\n  background: var(--ship-color);\n}\n\n.miss {\n  position: relative;\n\n  &::before,\n  &::after {\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 50%;\n    height: 4px;\n    background-color: var(--miss-color);\n  }\n\n  &::before {\n    transform: translate(-50%, -50%) rotate(45deg);\n  }\n\n  &::after {\n    transform: translate(-50%, -50%) rotate(-45deg);\n  }\n}\n\n.hit {\n  position: relative;\n\n  &::before {\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 30%;\n    height: 30%;\n    background-color: var(--hit-color);\n    border-radius: 50%;\n    transform: translate(-50%, -50%);\n  }\n}\n'],sourceRoot:""}]);const i=a},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,s){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(a[c]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);r&&a[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),o&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=o):h[4]="".concat(o)),e.push(h))}},e}},354:t=>{t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(o," */");return[e].concat([s]).join("\n")}return[e].join("\n")}},72:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var s={},a=[],i=0;i<t.length;i++){var c=t[i],l=r.base?c[0]+r.base:c[0],h=s[l]||0,d="".concat(l," ").concat(h);s[l]=h+1;var p=n(d),A={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(A);else{var u=o(A,r);r.byIndex=i,e.splice(i,0,{identifier:d,updater:u,references:1})}a.push(d)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var s=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<s.length;a++){var i=n(s[a]);e[i].references--}for(var c=r(t,o),l=0;l<s.length;l++){var h=n(s[l]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}s=c}}},659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var s=e[r]={id:r,exports:{}};return t[r](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;class r{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get name(){return this.#t}getGameboard(){return this.#e}}class o{#n=[];#r=[];#o=(()=>new Map)();placeShip(t,e){if(t.length!==e.length)throw new Error("Length of the ship should be same as length of the given coordinates");if(this.#n.find((e=>{let{ship:n}=e;return n===t})))throw new Error("Same ship exists within the gameboard");for(const{coordinates:t}of this.#n)for(const n of e)if(t.some((t=>t[0]===n[0]&&t[1]===n[1])))throw new Error("The ship overlaps with another ship");this.#n.push({ship:t,coordinates:e})}receiveAttack(t){const e=this.#n.find((e=>e.coordinates.some((e=>e[0]===t[0]&&e[1]===t[1]))));return e?(e.ship.hit(),this.#o.set(e.ship,[...this.#o.get(e.ship)??[],t]),!0):(this.#r.push(t),!1)}isShipsSunk(){return this.#n.every((t=>{let{ship:e}=t;return e.isSunk()}))}getShips(){return this.#n}getMissedShots(){return this.#r}getScoredShots(){return this.#o}}class s{#s;#a;constructor(t){if(t<=0)throw new Error("Length of the Ship should be at-least 1");this.#s=t,this.#a=0}hit(){return this.#a<this.#s&&(this.#a++,!0)}isSunk(){return this.#a>=this.#s}get hits(){return this.#a}get length(){return this.#s}}class a{constructor(t,e){this.parentEl=t,this.player=e}drawNameAndBoard(){this.drawName(),this.drawBoard()}drawName(){this.parentEl.querySelector(".name").textContent=this.player.name}drawBoard(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const e=this.parentEl.querySelector(".board");e.innerHTML="";for(let n=0;n<t;n++){const r=document.createElement("div");for(let e=0;e<t;e++){const t=document.createElement("div");t.setAttribute("data-x",n),t.setAttribute("data-y",e),r.appendChild(t)}e.appendChild(r)}"Machine"!==this.player.name&&this.labelShips(),this.labelHits(),this.labelShots()}labelShips(){const t=this.player.getGameboard().getShips()??[];for(let{coordinates:e}of t)for(let t of e)this.parentEl.querySelector(`div[data-x='${t[0]}'][data-y='${t[1]}']`).classList.toggle("ship")}labelHits(){const t=this.player.getGameboard().getScoredShots().values()??[];for(const e of t)for(const t of e)this.parentEl.querySelector(`div[data-x='${t[0]}'][data-y='${t[1]}']`).classList.toggle("hit")}labelShots(){const t=this.player.getGameboard().getMissedShots();for(const e of t)this.parentEl.querySelector(`div[data-x='${e[0]}'][data-y='${e[1]}']`).classList.toggle("miss")}}class i{constructor(){this.player1=new r("You",new o),this.player2=new r("Machine",new o),this.lastPlayer=this.player2,this.init()}init(){this.setupShips(),this.renderBoards(),this.addEventListeners()}setupShips(){this.placeShips(this.player1),this.placeShips(this.player2)}placeShips(t){const e=t.getGameboard(),n=new Set;for(const t of[2,3,3,4,5]){let r=!1;for(;!r;){const o=c(0,10),a=c(0,10),i=Math.random()<.5?"horizontal":"vertical",l=this.getCoordinates(o,a,t,i);this.canPlaceShip(l,n)&&(e.placeShip(new s(t),l),l.forEach((t=>n.add(t.toString()))),r=!0)}}}getCoordinates(t,e,n,r){const o=[];for(let s=0;s<n;s++)"horizontal"===r?o.push([t+s,e]):o.push([t,e+s]);return o}canPlaceShip(t,e){return t.every((t=>{let[n,r]=t;return n>=0&&n<10&&r>=0&&r<10&&!e.has([n,r].toString())}))}renderBoards(){const t=document.querySelector(".player1"),e=document.querySelector(".player2"),n=new a(t,this.player1),r=new a(e,this.player2);n.drawNameAndBoard(),r.drawNameAndBoard()}addEventListeners(){const t=document.querySelector(".player1"),e=document.querySelector(".player2");this.setupBoardEventListeners(t,this.player1),this.setupBoardEventListeners(e,this.player2)}setupBoardEventListeners(t,e){const n=t.querySelectorAll("[data-x][data-y]"),r=e.getGameboard();n.forEach((t=>{const n=t.getAttribute("class")?.split(" ")??[];!n||n.includes("hit")||n.includes("miss")||t.addEventListener("click",(()=>{this.lastPlayer===e&&this.handleAttack(t,r,e)}))}))}handleAttack(t,e,n){const r=Number(t.getAttribute("data-x")),o=Number(t.getAttribute("data-y"));e.receiveAttack([r,o]),this.updateBoards(),setTimeout((()=>{e.isShipsSunk()&&alert(("You"===n.name?"Machine":"You")+" won the game")}),1),this.switchPlayer()}updateBoards(){this.renderBoards(),this.addEventListeners()}switchPlayer(){this.lastPlayer=this.lastPlayer===this.player1?this.player2:this.player1,this.lastPlayer===this.player1&&this.machineTurn()}machineTurn(){const t=this.player1.getGameboard(),e=new Set(t.getMissedShots().map((t=>t.toString())));for(const n of t.getScoredShots().values())for(const t of n)e.add(t.toString());let n=!1;for(;!n;){const r=[c(0,10),c(0,10)];if(!e.has(r.toString())){const[e,o]=r;this.handleAttack(document.querySelector(`.player1 [data-x='${e}'][data-y='${o}']`),t,this.player1),n=!0}}}}function c(t,e){const n=Math.ceil(t),r=Math.floor(e);return Math.floor(Math.random()*(r-n)+n)}var l=n(72),h=n.n(l),d=n(825),p=n.n(d),A=n(659),u=n.n(A),f=n(56),g=n.n(f),m=n(540),v=n.n(m),y=n(113),b=n.n(y),E=n(365),C={};C.styleTagTransform=b(),C.setAttributes=g(),C.insert=u().bind(null,"head"),C.domAPI=p(),C.insertStyleElement=v(),h()(E.A,C),E.A&&E.A.locals&&E.A.locals,document.addEventListener("DOMContentLoaded",(()=>{new i}))})();
//# sourceMappingURL=index.bundle.js.map